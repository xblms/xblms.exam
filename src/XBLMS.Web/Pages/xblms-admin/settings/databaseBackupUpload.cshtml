@page
@{ Layout = "_Layout"; }

<el-card>
    <div slot="header" class="clearfix">
        <span>上传数据库备份文件</span>
        <el-button style="float: right;padding:3px 0;" type="text" v-on:click="utils.closeLayerSelf"><i class="el-icon-close"></i></el-button>
    </div>
    <el-scrollbar class="scrollbar" :style="{ height: ($(window).innerHeight()-180) + 'px' }">
        <div style="margin-right:18px;">
            <el-form v-on:submit.native.prevent ref="form" :model="form" :size="euiSize">
                <el-form-item label="securityKey" prop="securityKey" :rules="[{ required: true, message: '请输入securityKey' }]">
                    <el-input v-model="form.securityKey"></el-input>
                    <small>请进入系统根目录，打开 xblms.json 获取 SecurityKey的值</small>
                </el-form-item>
                <el-form-item label="备份文件" prop="fileList" :rules="[{ required: true, message: '请选择备份文件' }]">
                    <el-upload class="upload-demo"
                               ref="upload"
                               :auto-upload="false"
                               :limit="1"
                               drag
                                action="void"
                               :on-change="handleChange"
                               :http-request="customUpload"
                               :before-upload="beforeUpload"
                               :show-file-list="showFileList"
                               :file-list="fileList"
                               :on-exceed="handleExceed">
                        <i class="el-icon-upload"></i>
                        <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
                        <div class="el-upload__tip" slot="tip">只能上传*.zip文件</div>
                    </el-upload>
                </el-form-item>
            </el-form>
        </div>
    </el-scrollbar>
</el-card>
<el-row align="center" style="margin-top:18px;">
    <el-col :span="24" align="center">
        <el-button icon="el-icon-download" :size="euiSize" type="primary" v-on:click="btnUploadClick">立即上传</el-button>
        <el-button icon="el-icon-close" :size="euiSize" v-on:click="utils.closeLayerSelf">取 消</el-button>
    </el-col>
</el-row>


@section Scripts{
    <script src="/sitefiles/assets/js/admin/settings/databaseBackupUpload.js" type="text/javascript"></script>
}